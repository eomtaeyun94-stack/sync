<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Sync</title>

<style>
*{margin:0;padding:0;box-sizing:border-box;}

body{
    font-family:'Segoe UI',sans-serif;
    background:#1c1c1f;
    color:white;
    min-height:100vh;
}

header{
    padding:30px 50px;
    font-size:24px;
    font-weight:600;
}

.search-box{
    display:flex;
    justify-content:center;
    margin:40px 0;
}

.search-box input{
    width:450px;
    padding:15px 20px;
    border-radius:30px;
    border:1px solid #8a2cff;
    background:#252529;
    color:white;
    outline:none;
    box-shadow:0 0 12px rgba(138,44,255,0.6);
}

.category{
    display:flex;
    justify-content:center;
    gap:50px;
    margin-bottom:30px;
}

.category button{
    background:none;
    border:none;
    font-size:18px;
    color:#bbb;
    cursor:pointer;
    white-space:nowrap;
}

.category button.active,
.category button:hover{
    color:#c78cff;
}

.board{
    width:75%;
    margin:auto;
    background:#252529;
    border-radius:20px;
    padding:30px;
    border:1px solid #8a2cff;
    box-shadow:0 0 20px rgba(138,44,255,0.5);
    min-height:150px;
}

.post{
    padding:18px 0;
    border-bottom:1px solid rgba(255,255,255,0.08);
}

.post:last-child{border:none;}

.no-result{
    text-align:center;
    padding:40px 0;
    color:#aaa;
}

.write-btn{
    position:fixed;
    bottom:40px;
    right:40px;
    width:70px;
    height:70px;
    border-radius:50%;
    border:1px solid #8a2cff;
    background:#252529;
    cursor:pointer;
    box-shadow:0 0 20px rgba(138,44,255,0.8);
    display:flex;
    justify-content:center;
    align-items:center;
    font-size:28px;
}

.write-btn span{
    display:inline-block;
    transform:scaleX(-1);
}

.modal{
    display:none;
    position:fixed;
    inset:0;
    background:rgba(0,0,0,0.6);
    justify-content:center;
    align-items:center;
}

.modal-content{
    position:relative;
    background:#252529;
    padding:30px;
    border-radius:20px;
    width:400px;
    border:1px solid #8a2cff;
    box-shadow:0 0 20px rgba(138,44,255,0.5);
}

.close-btn{
    position:absolute;
    top:15px;
    right:15px;
    background:none;
    border:none;
    color:#c78cff;
    font-size:20px;
    cursor:pointer;
}

.modal-content select,
.modal-content input,
.modal-content textarea{
    width:100%;
    margin-bottom:12px;
    padding:10px;
    border-radius:10px;
    border:1px solid #8a2cff;
    background:#1c1c1f;
    color:white;
}

.modal-content button.submit-btn{
    width:100%;
    padding:12px;
    border:none;
    border-radius:10px;
    background:#8a2cff;
    cursor:pointer;
    color:white;
}
</style>
</head>
<body>

<header>Sync</header>

<div class="search-box">
    <input type="text" id="searchInput" placeholder="#제목 검색">
</div>

<div class="category">
    <button class="active" onclick="filterCategory('자유', event)">자유</button>
    <button onclick="filterCategory('거래', event)">거래</button>
    <button onclick="filterCategory('후기', event)">후기</button>
</div>

<div class="board" id="board"></div>

<button class="write-btn" onclick="openModal()">
    <span>✎</span>
</button>

<div class="modal" id="modal">
    <div class="modal-content">
        <button class="close-btn" onclick="closeModal()">✕</button>

        <select id="category">
            <option value="자유">자유</option>
            <option value="거래">거래</option>
            <option value="후기">후기</option>
        </select>

        <input type="text" id="title" placeholder="제목">
        <textarea id="content" rows="4" placeholder="내용"></textarea>
        <button class="submit-btn" onclick="addPost()">작성</button>
    </div>
</div>

<script>
let posts=[];
let currentCategory="자유";
let isSearchMode=false;

function renderPosts(list=null){
    const board=document.getElementById("board");
    board.innerHTML="";

    let displayList;

    if(isSearchMode){
        displayList=list || [];
        if(displayList.length===0){
            board.innerHTML=`<div class="no-result">찾으시는 매물은 현재 없습니다</div>`;
            return;
        }
    }else{
        displayList=posts.filter(p=>p.category===currentCategory);
    }

    displayList.forEach(p=>{
        board.innerHTML+=`
        <div class="post">
            <h3>[${p.category}] ${p.title}</h3>
            <p>${p.content}</p>
        </div>`;
    });
}

function addPost(){
    const category=document.getElementById("category").value;
    const title=document.getElementById("title").value;
    const content=document.getElementById("content").value;
    if(!title||!content)return;
    posts.unshift({category,title,content});
    closeModal();
    isSearchMode=false;
    renderPosts();
}

function filterCategory(cat, e){
    currentCategory=cat;
    isSearchMode=false;
    document.querySelectorAll(".category button")
        .forEach(b=>b.classList.remove("active"));
    e.target.classList.add("active");
    renderPosts();
}

function openModal(){
    document.getElementById("modal").style.display="flex";
}

function closeModal(){
    document.getElementById("modal").style.display="none";
}

/* 검색 */
document.getElementById("searchInput").addEventListener("keypress",function(e){
    if(e.key==="Enter"){
        let keyword=this.value.trim();
        if(keyword.startsWith("#")){
            keyword=keyword.substring(1);
        }
        keyword=keyword.toLowerCase();

        isSearchMode=true;

        const result=posts.filter(p =>
            p.title.toLowerCase().includes(keyword) ||
            p.content.toLowerCase().includes(keyword)
        );

        renderPosts(result);
    }
});

renderPosts();
</script>

</body>
</html>